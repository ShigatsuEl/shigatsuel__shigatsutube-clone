extends layouts/sub-main.pug
include mixins/videoPlayer
include mixins/commentBlock

block content
    .video__wrapper
        .video__container
            .video__edit-box
                if loggedUser && video.creator.id === loggedUser.id
                    a(href=routes.editVideo(video.id)) 
                        button Edit Video
            +videoPlayer({
                src:video.fileUrl,
                id:video.id
            })
            .video__info-one
                h5.video__title=video.title
                .video__subtitle
                    .video__views=`VIEWS ${video.views} Â· ${dateFormatter(video.createdAt)}`
                    .video__likes
                        span.video__like
                            i.fas.fa-thumbs-up
                            | 0
                        span.video__dislike
                            i.fas.fa-thumbs-down
                            | 0
            .video__info-two
                h5.video__creator Uploaded by
                    if loggedUser && video.creator.id === loggedUser.id
                        a(href=routes.me)=video.creator.name
                    else
                        a(href=routes.userDetail(video.creator.id))=video.creator.name
                h5.video__description=video.description
        .comments__container#jsCommentContainer
            h5.comments__count
                if video.comments.length === 1
                    span.comments__number-one#jsCommentNumber=video.comments.length
                    span#jsLiteralComment   Comment
                else
                    span.comments__number-remainder#jsCommentNumber=video.comments.length
                    span#jsLiteralComment   Comments
            .comments__submit-box
                if loggedUser && loggedUser.id === user.id
                    img.comment__loginAvatar#jsCommentLoginAvatar(src=loggedUser.avatarUrl)
                else
                    i.fas.fa-user.comment__UnLoginAvatar#jsCommentUnloginAvatar
                form.add__formComment#jsAddCommentForm(data-id=loggedUser.id)
                    input.add__inputComment#jsAddCommentInput(type="text", placeholder="Please feel free to comment~", name="comment", autocomplete="off", required)
            .comments__btnBox.hidden#jsBtnBox
                button.cancel__btn#jsCancelBtn(type="button") CANCEL
                button.comment__btn#jsCommentBtn COMMENT
            .comments__view-box
                ul.comments__list#jsCommentList
                    each comment in video.comments.reverse()
                        +commentBlock({
                            id : comment.id,
                            creator : comment.creator,
                            avatarUrl : comment.creator.avatarUrl,
                            createdAt : dateFormatter(comment.createdAt),
                            text : comment.text,
                        })
            
